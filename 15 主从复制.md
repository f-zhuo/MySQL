# 主从复制

同时在多台数据库上保存相同的数据，并且将读操作和写操作分开，写操作集中在一台主数据库上，读操作集中在多台从数据库上

## MySQL的复制过程

- master把改变的记录写入二进制日志（binary log）里
- slave读取二进制日志并拷贝到自身的中继日志（relay log）里
- slave按照relay log 进行操作，改变自身的数据

*主从服务器上的my.cnf文件的server-id应该不同*

## 主从复制的方式

- 同步复制

  master等待slave1，slave2····都复制文件成功后再继续写入

- 异步复制

  master不理会slave的进度，只完成自己对数据库的操作

- 半同步复制

  master只等一个slave复制成功就会继续操作

MySQL5.5之前默认的是异步复制，之后是半同步复制

异步复制的主要问题是slave的数据会有延迟，若master出现故障，slave还没有来得及写入，就会出现丢失数据的现象

半同步复制保证了除master外还有一个slave存有binary log，防止数据丢失

## 复制原则

一个master可以有多个slave，一个slave只能有一个master
